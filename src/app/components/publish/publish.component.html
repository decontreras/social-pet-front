<div class="publish">
  <div class="publish__title">
    <svg class="publish__title_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="52px" height="52px"
      viewBox="0 0 52 52" enable-background="new 0 0 52 52" xml:space="preserve">
      <path
        d="M50.5,6h-41C8.7,6,8,6.7,8,7.5V38c0,1.2-1.1,2.2-2.3,2c-1-0.2-1.7-1.1-1.7-2.1V16c0-0.6-0.4-1-1-1H1.5  C0.7,15,0,15.7,0,16.5V42c0,2.2,1.8,4,4,4h4h40c2.2,0,4-1.8,4-4V7.5C52,6.7,51.3,6,50.5,6z M28,35c0,0.6-0.4,1-1,1H15  c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1V35z M28,27c0,0.6-0.4,1-1,1H15c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1h12  c0.6,0,1,0.4,1,1V27z M46,35c0,0.6-0.4,1-1,1H33c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1V35z M46,27  c0,0.6-0.4,1-1,1H33c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1V27z M46,19c0,0.6-0.4,1-1,1H15c-0.6,0-1-0.4-1-1v-6  c0-0.6,0.4-1,1-1h30c0.6,0,1,0.4,1,1V19z" />
    </svg>
    <div class="publish__title_text">Publica algo</div>
    <div class="publish__title_type">
      <ion-select placeholder="Selecciona una opciÃ³n..." [(ngModel)]="type">
        <ion-select-option *ngFor="let item of typesEnum" [value]="item">{{item}}</ion-select-option>
      </ion-select>
    </div>
  </div>
  <div class="publish__content">
    <div class="publish__content_profile">
      <svg *ngIf="!dataUser.image" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
        version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 285.5 285.5"
        style="enable-background:new 0 0 285.5 285.5;" xml:space="preserve">
        <g id="XMLID_791_">
          <path id="XMLID_792_"
            d="M142.75,125.5c34.601,0,62.751-28.149,62.751-62.75S177.351,0,142.75,0S79.999,28.149,79.999,62.75   S108.149,125.5,142.75,125.5z M142.75,30c18.059,0,32.751,14.691,32.751,32.75S160.809,95.5,142.75,95.5   s-32.751-14.691-32.751-32.75S124.691,30,142.75,30z" />
          <path id="XMLID_795_"
            d="M142.75,155.5c-63.411,0-115,51.589-115,115c0,8.284,6.716,15,15,15h200c8.284,0,15-6.716,15-15   C257.75,207.089,206.161,155.5,142.75,155.5z M59.075,255.5c7.106-39.739,41.923-70,83.675-70s76.569,30.261,83.675,70H59.075z" />
        </g>
      </svg>
      <img *ngIf="dataUser.image" [src]="dataUser.image" alt="">
    </div>
    <span class="publish__content_text" id="publish__content_text" role="textbox" contenteditable></span>
  </div>
  <div class="publish__preview" *ngIf="multimediaList.length" (click)="setOpen(true)">
    <div class="publish__preview_multimedia" *ngIf="multimediaList.length == 1; else multiplePreview">
      <div class="publish__preview_container" *ngIf="multimediaList[0].type.includes('image'); else videoTypeOne">
        <img [src]="multimediaList[0].base64" alt="">
      </div>
      <ng-template #videoTypeOne>
        <div class="publish__preview_container">
          <video>
            <source [src]="multimediaList[0].base64" [type]="multimediaList[0].type">
          </video>
        </div>
      </ng-template>
    </div>
    <ng-template #multiplePreview>
      <div
        class="publish__preview_multimedia_{{multimediaLength}}__{{1}} publish__preview_multimedia_{{multimediaLength}}">
        <div class="publish__preview_container" *ngIf="multimediaList[0].type.includes('image'); else videoTypeTwo">
          <img [src]="multimediaList[0].base64" alt="">
        </div>
        <ng-template #videoTypeTwo>
          <div class="publish__preview_container">
            <video>
              <source [src]="multimediaList[0].base64" [type]="multimediaList[0].type">
            </video>
          </div>
        </ng-template>
      </div>
      <div class="publish__preview_multimedia_{{multimediaLength}}__container">
        <div *ngFor="let item of multimediaList.slice(1, 3); let i = index"
          class="publish__preview_multimedia_{{multimediaLength}}__{{i + 2}} publish__preview_multimedia_{{multimediaLength}}">
          <div class="publish__preview_container"
            *ngIf="multimediaList[i + 1].type.includes('image'); else videoTypeThree">
            <img [src]="multimediaList[i + 1].base64" alt="">
          </div>
          <ng-template #videoTypeThree>
            <div class="publish__preview_container">
              <video>
                <source [src]="multimediaList[i + 1].base64" [type]="multimediaList[i + 1].type">
              </video>
            </div>
          </ng-template>
        </div>
      </div>
    </ng-template>
    <div class="publish__preview_more" *ngIf="multimediaList.length > 3">
      +{{multimediaList.length - 3}}</div>
  </div>
  <div class="publish__footer">
    <label for="publish__footer_files">
      <input type="file" id="publish__footer_files" multiple hidden [accept]="allowedMimeType.toString()"
        (change)="uploadPreview($event)" />
      <svg class="publish__footer_icon" xmlns="http://www.w3.org/2000/svg" width="24px" height="24px"
        viewBox="0 0 24 24">
        <path
          d="M12 8c-2.168 0-4 1.832-4 4s1.832 4 4 4 4-1.832 4-4-1.832-4-4-4zm0 6c-1.065 0-2-.935-2-2s.935-2 2-2 2 .935 2 2-.935 2-2 2z" />
        <path
          d="M20 5h-2.586l-2.707-2.707A.996.996 0 0 0 14 2h-4a.996.996 0 0 0-.707.293L6.586 5H4c-1.103 0-2 .897-2 2v11c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2zM4 18V7h3c.266 0 .52-.105.707-.293L10.414 4h3.172l2.707 2.707A.996.996 0 0 0 17 7h3l.002 11H4z" />
      </svg>
    </label>
    <button (click)="upload()" class="publish__footer_button">Publicar</button>
  </div>
</div>
<ion-modal [isOpen]="isModalOpen">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Contenido multimedia</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="setOpen(false)">Cerrar</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <div class="publish__modal">
        <div class="publish__modal_content" *ngFor="let item of multimediaList">
          <img *ngIf="item.type.includes('image'); else videoTypeThree" [src]="item.base64" alt="">
          <ng-template #videoTypeThree>
            <video controls>
              <source [src]="item.base64" [type]="item.type">
            </video>
          </ng-template>
        </div>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>